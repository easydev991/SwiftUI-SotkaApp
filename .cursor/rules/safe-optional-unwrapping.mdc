---
description: Правила безопасного извлечения опционалов в Swift
alwaysApply: true
---

# Безопасное извлечение опционалов

## Основные принципы

### 1. Запрет на force unwrap

- **Никогда не используй** `!` для извлечения опционалов
- **Всегда используй** безопасные методы извлечения
- **Проверяй** наличие значения перед использованием

### 2. Рекомендуемые методы

#### Optional binding (if let)

```swift
// Правильно
if let value = optionalValue {
    // Используем value
}

// Неправильно
let value = optionalValue! // ЗАПРЕЩЕНО!
```

#### Guard statements

```swift
// Правильно
guard let value = optionalValue else {
    return
}
// Используем value
```

#### Nil coalescing operator (??)

```swift
// Правильно
let value = optionalValue ?? defaultValue

// Неправильно
let value = optionalValue! // ЗАПРЕЩЕНО!
```

#### Optional chaining

```swift
// Правильно
let result = optionalValue?.someMethod()?.anotherMethod()

// Неправильно
let result = optionalValue!.someMethod()!.anotherMethod() // ЗАПРЕЩЕНО!
```

### 3. В тестах

```swift
// Правильно
let value = try #require(optionalValue)

// Неправильно
let value = optionalValue! // ЗАПРЕЩЕНО!
```

### 4. Правила для Cursor

#### При написании кода

1. **Всегда проверяй** опционалы перед использованием
2. **Используй guard let** для раннего возврата
3. **Используй if let** для условной обработки
4. **Используй ??** для значений по умолчанию
5. **Никогда не используй** `!` для извлечения

## Заключение

Безопасное извлечение опционалов критически важно для стабильности приложения. Force unwrap может привести к крашам приложения, поэтому всегда используй безопасные методы извлечения опционалов.
