# Миграция данных

## SwiftData миграции

При добавлении новых полей в модели SwiftData необходимо обеспечить мягкую миграцию данных.

### Пример миграции

При добавлении новых полей в модель SwiftData (например, `newField`):

1. **Новые поля имеют значения по умолчанию** в объявлении модели:
   ```swift
   var newField: String = ""
   var newOptionalField: Int? = nil
   var newBoolField: Bool = false
   ```

2. **Инициализаторы устанавливают правильные значения**:
   - Для новых объектов устанавливаются значения по умолчанию
   - Для существующих объектов SwiftData автоматически применяет значения по умолчанию

3. **SwiftData автоматически обрабатывает миграцию** при первом запуске после обновления модели

### Проверка миграции

После обновления модели рекомендуется:
1. Запустить приложение в симуляторе
2. Проверить, что существующие данные сохранились
3. Убедиться, что новые поля имеют корректные значения по умолчанию
4. Протестировать создание новых объектов

### Общие принципы миграции

- Все новые поля должны иметь значения по умолчанию
- Инициализаторы должны корректно устанавливать значения для разных сценариев создания объектов
- Тестирование миграции обязательно перед релизом
- При сложных изменениях схемы может потребоваться ручная миграция через `ModelContainer` с кастомными миграциями
