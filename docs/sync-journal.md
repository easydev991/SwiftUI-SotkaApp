# Журнал синхронизаций (Sync Journal)

Этот документ описывает реализованный функционал журнала синхронизаций для отслеживания операций синхронизации данных с сервером.

### Краткий обзор функционала

- **Список синхронизаций**: отображение всех записей синхронизаций, сгруппированных по дате.
- **Детальный просмотр**: просмотр полной информации о каждой синхронизации (дата, результат, статистика, ошибки).
- **Удаление записей**: возможность удалить все записи журнала через кнопку в навбаре.
- **Навигация**: переход к журналу из экрана настроек (MoreScreen).

### Модель данных: `SyncJournalEntry`

- `id: UUID` — уникальный идентификатор записи.
- `startDate: Date` — дата и время начала синхронизации.
- `endDate: Date?` — дата и время завершения синхронизации (nil для записей в процессе).
- `result: SyncResultType` — тип результата (успех, частично, ошибка).
- `details: SyncResultDetails?` — детальная информация о результатах синхронизации (статистика по прогрессу/упражнениям/активностям, ошибки).
- `user: User?` — связь с пользователем через `@Relationship`.

### Офлайн-приоритет

- Все записи синхронизаций сохраняются локально в SwiftData.
- Записи создаются автоматически при каждой синхронизации через `StatusManager`.

### Интеграция с сервисами

- **StatusManager** — создает записи журнала при синхронизации через `syncJournalAndProgress`.
- **Сервисы синхронизации** (ProgressSyncService, CustomExercisesService, DailyActivitiesService) — возвращают результаты синхронизации для записи в журнал.
- Все методы синхронизации возвращают `SyncResult` с детальной информацией.

### UI компоненты

- **SyncJournalScreen** — экран со списком синхронизаций с группировкой по дате, кнопкой удаления всех записей и пустым состоянием.
- **SyncJournalEntryDetailsScreen** — детальный экран с общей информацией, статистикой по типам данных и списком ошибок.

### Ключевые правила

- Записи создаются автоматически при каждой синхронизации.
- Группировка по дате улучшает UX при просмотре истории синхронизаций.
- Блокировка навигации для записей в процессе синхронизации.
- Отображаются только секции с фактическими данными в детальном экране.
- Все вычисляемые свойства для отображения (локализация, цвета, форматирование) должны быть в моделях, а не в UI.
