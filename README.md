# SOTKA
[<img alt="Xcode Version" src="https://img.shields.io/badge/Xcode_Version-26.0-blue">](https://developer.apple.com/xcode/)
[<img alt="Swift Version" src="https://img.shields.io/badge/Swift_Version-6.2-orange">](https://swift.org)
[<img alt="iOS Version" src="https://img.shields.io/badge/iOS_Version-17-4F9153">](https://www.apple.com/ios/)

## Начало работы
Для подготовки проекта к работе необходимо:
1. Клонировать репозиторий
2. Открыть в терминале папку с проектом
3. Выполнить команду `make setup`

Все команды перечислены в [Makefile](./Makefile), справку можно получить по команде `make help`.

## Миграция данных

### SwiftData миграции

При добавлении новых полей в модели SwiftData необходимо обеспечить мягкую миграцию данных:

#### Пример миграции для CustomExercise

При добавлении полей `isSynced`, `shouldDelete`, `usageCount` в модель `CustomExercise`:

1. **Новые поля имеют значения по умолчанию** в объявлении модели:
   ```swift
   var isSynced: Bool = false
   var shouldDelete: Bool = false  
   var usageCount: Int = 0
   ```

2. **Инициализаторы устанавливают правильные значения**:
   - Для новых локальных объектов: `isSynced = false`, `shouldDelete = false`, `usageCount = 0`
   - Для объектов с сервера: `isSynced = true`, `shouldDelete = false`

3. **SwiftData автоматически обрабатывает миграцию** при первом запуске после обновления модели

#### Проверка миграции

После обновления модели рекомендуется:
1. Запустить приложение в симуляторе
2. Проверить, что существующие данные сохранились
3. Убедиться, что новые поля имеют корректные значения по умолчанию
4. Протестировать создание новых объектов

## Карта экранов и функционала

- Для получения доступа к возможностям приложения необходимо авторизоваться. - Зарегистрироваться можно на [сайте](https://100.workout.su).

### Основное приложение (iOS)

- **главный экран**
  - [x] отображение текущего дня тренировки
  - [ ] переход к тренировке
  - [ ] отображение статистики
  - [ ] управление состоянием тренировки (отдых, растяжка, болезнь)
- **инфопосты**
  - [ ] список инфопостов
  - [ ] просмотр инфопоста
  - [ ] навигация по инфопостам
- **дневник тренировок**
  - [ ] табличное представление дневника
  - [ ] коллекционное представление дневника
  - [ ] переключение между видами отображения
  - [ ] просмотр записей тренировок
  - [ ] детальная информация о тренировках
- **прогресс**
  - [ ] отображение прогресса тренировок
  - [ ] статистика тренировок
  - [ ] графики прогресса
  - [ ] сохранение прогресса
- **экран тренировки**
  - **основной экран тренировки**
    - [ ] отображение упражнений
    - [ ] таймер тренировки
    - [ ] управление кругами
    - [ ] кнопки управления (старт, пауза, стоп)
    - [ ] отображение прогресса упражнения
  - **экран подхода**
    - [ ] отображение конкретного подхода
    - [ ] управление повторениями
    - [ ] таймер отдыха
    - [ ] переход между подходами
  - **экран круга**
    - [ ] управление кругами тренировки
    - [ ] отображение упражнений в круге
    - [ ] навигация между кругами
  - **экран завершения тренировки**
    - [ ] результаты тренировки
    - [ ] статистика тренировки
    - [ ] сохранение результатов
    - [ ] возврат в главное меню
  - **редактор тренировок**
    - [ ] создание кастомных тренировок
    - [ ] редактирование упражнений
    - [ ] настройка параметров тренировки
    - [ ] добавление новых упражнений
  - **экран таймера**
    - [ ] отображение времени
    - [ ] управление таймером
    - [ ] настройки времени
    - [ ] звуковые уведомления
- **экран авторизации**
  - **выбор типа входа**
    - [x] вход через email
  - **вход через email**
    - [x] ввод email и пароля
    - [x] валидация данных
    - [x] обработка ошибок
  - **восстановление пароля**
    - [x] восстановление пароля от учетной записи
- **профиль**
  - **информация пользователя**
    - [x] отображение профиля
    - [x] редактирование данных
  - **параметры тела**
    - [ ] ввод параметров тела
    - [ ] фотографии тела (спереди, сбоку, сзади)
    - [ ] сохранение данных
- **экран настроек**
  - **основные настройки**
    - [x] настройки приложения
    - [x] управление аккаунтом
    - [x] уведомления

### Приложение для часов (watch extension)

- **главный экран**
  - [ ] отображение текущего дня
  - [ ] кнопка начала тренировки
  - [ ] отображение прогресса
  - [ ] управление состоянием (отдых, растяжка, болезнь)
  - [ ] загрузка данных тренировки

- **экран тренировки**
  - **базовый экран тренировки**
    - [ ] отображение упражнений
    - [ ] управление тренировкой
    - [ ] сохранение тренировки
    - [ ] обновление интерфейса
  - **экран упражнения**
    - [ ] отображение конкретного упражнения
    - [ ] управление повторениями
    - [ ] переход между упражнениями
  - **экран подхода**
    - [ ] отображение подхода
    - [ ] управление подходами
    - [ ] навигация между подходами
  - **экран круга**
    - [ ] управление кругами
    - [ ] отображение упражнений в круге
    - [ ] переход между кругами
  - **экран остановки**
    - [ ] подтверждение остановки
    - [ ] сохранение прогресса
    - [ ] возврат в главное меню
  - **экран завершения**
    - [ ] результаты тренировки
    - [ ] статистика
    - [ ] возврат в главное меню
  - **экран таймера**
    - [ ] отображение времени
    - [ ] управление таймером
    - [ ] звуковые уведомления

- **экран статистики**
  - [ ] время тренировки
  - [ ] количество циклов
  - [ ] калории
  - [ ] пульс (средний, минимальный, максимальный)

- **экран уведомлений**
  - [ ] обработка уведомлений
  - [ ] отображение уведомлений

- **циферблаты часов**
  - [ ] отображение текущего дня на циферблате
  - [ ] обновление данных циферблата
  - [ ] настройка циферблатов

- **менеджер сессий**
  - [ ] управление сессиями тренировок
  - [ ] синхронизация данных
  - [ ] обработка событий тренировки

- **синхронизация даты начала программы**
  - [ ] синхронизация с основным приложением
  - [ ] передача данных
  - [ ] обработка конфликтов